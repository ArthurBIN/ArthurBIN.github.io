(function(){var t={2248:function(t,e,s){"use strict";var i=s(5471),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},["/active"!==t.$route.path?e("div",{staticClass:"TopBox"},["/login"!==t.$route.path&&"/register"!==t.$route.path&&"/"!==t.$route.path&&"/editstory"!==t.$route.path?e("div",{staticClass:"topIcon iconfont icon-a-037_zhuye32",on:{click:function(e){return t.goIndex()}}}):t._e(),"/register"===t.$route.path?e("div",{staticClass:"topIcon iconfont icon-fanhui",on:{click:function(e){return t.goRegister()}}}):t._e(),"/editstory"===t.$route.path||"/login"===t.$route.path?e("div",{staticClass:"topIcon iconfont icon-fanhui",on:{click:function(e){return t.goBack()}}}):t._e(),e("div",{staticClass:"TitleBox"},[t._v(t._s(t.$route.meta.title))])]):t._e(),e("div",{style:"/active"!==t.$route.path?"padding-top: 60px":""},[e("router-view")],1)])},n=[],a=(s(4114),s(8393)),r={name:"app",data(){return{}},mounted(){const t=localStorage.getItem("user_id");t?(0,a.A)("用户已登录"):(0,a.A)("用户未登录")},components:{},methods:{goIndex(){this.$router.push("/")},goBack(){this.$router.back()},goRegister(){this.$router.replace({name:"login"})}}},A=r,c=s(1656),l=(0,c.A)(A,o,n,!1,null,null,null),u=l.exports,d=s(173),g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"All"},[e("div",{staticClass:"topIconChat"},[e("van-icon",{attrs:{name:"ellipsis"},on:{click:t.showPopup}})],1),e("van-popup",{staticClass:"popupBox",style:{height:"60%"},attrs:{round:"",position:"bottom",closeable:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("div",{staticClass:"popupBox_Title"},[t._v("聊天记录")]),e("div",{staticClass:"popupBox_InfoBox"},t._l(t.infoLists,(function(s,i){return e("div",{key:i,on:{click:function(e){return t.GoDataPage(s._id)}}},[s.infoListItem&&s.infoListItem.length>0?e("div",{staticClass:"popupBox_InfoItem_FirstLine"},[e("div",{staticClass:"popupBox_InfoItem_Title"},[t._v("童年印象")]),e("div",{staticClass:"popupBox_InfoItem_Time"},[t._v(t._s(t.truncatedTime(s.time,0,11)))])]):t._e(),s.infoListItem&&s.infoListItem[0]?e("div",{staticClass:"popupBox_InfoItem_Text popupBox_InfoItem_inText"},[t._v(t._s(s.infoListItem[0].content))]):t._e(),s.infoListItem&&s.infoListItem[1]?e("div",{staticClass:"popupBox_InfoItem_Text"},[t._v(t._s(s.infoListItem[1].content))]):t._e()])})),0)]),t._m(0),t.isPull?e("div",{ref:"scrollArea",staticClass:"MiddleBox"},t._l(t.infoList,(function(s,i){return e("div",{key:i,staticClass:"DataBox",staticStyle:{"overflow-y":"scroll"}},[e("div",{staticClass:"DataItemBox",class:{"align-right":"user"===s.role,"align-left":"assistant"===s.role}},[e("div",{class:{DataItem1:"user"===s.role,DataItem2:"assistant"===s.role}},[t._v(" "+t._s(s.content)+" ")])])])})),0):t._e(),t.isPull?t._e():e("van-divider",{style:{color:"#8A9189",borderColor:"#8A9189",padding:"0 16px"}},[t._v(" 下拉查看历史记录")]),t.isPull?t._e():e("van-pull-refresh",{ref:"scrollArea",staticClass:"NewContentBox",on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[e("div",{staticClass:"NewContentBox_Text"},[t._v(" "+t._s(t.newText)+" ")])]),t.isPressed?e("div",{staticClass:"container"},[t._m(1),e("div",{staticClass:"circle"}),e("div",{staticClass:"circle"}),e("div",{staticClass:"circle"}),e("div",{staticClass:"circle"})]):t._e(),t.isPull?t._e():e("div",{staticClass:"speakBigBox"},[t.istext?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.combinedText,expression:"combinedText"}],staticClass:"speakText",domProps:{value:t.combinedText},on:{input:function(e){e.target.composing||(t.combinedText=e.target.value)}}}):t._e(),e("div",{staticClass:"speakBox_Two"},[e("div",{staticClass:"jianPan",class:{small:t.isJpPressed},style:t.istext?{backgroundColor:"#4fabe5"}:{backgroundColor:"gray"},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressJpButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseJpButton.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-jianpan1"})]),e("div",{staticClass:"SpeakBox",class:{small:t.isPressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseButton.apply(null,arguments)}}},[e("i",{staticClass:"ht iconfont icon-huatong"}),t._v(" 按住说话 ")]),e("div",{staticClass:"faSong",class:{small:t.isFsPressed},style:t.combinedText?{backgroundColor:"#4fabe5"}:{backgroundColor:"gray"},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressFsButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseFsButton.apply(null,arguments)}}},[e("i",{staticClass:"iconfont icon-fasong1"})])])]),t.isPull?e("div",{staticClass:"BackToChatBox",on:{click:function(e){return t.BackToChat()}}},[e("van-icon",{attrs:{name:"replay"}}),t._v(" 返回聊天 ")],1):t._e()],1)},h=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgiBox"},[e("img",{attrs:{src:s(1642),alt:""}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"Link"},[e("i",{staticClass:"icon-a-6Ahuatong iconfont"})])}],p=(s(6573),s(8100),s(7936),s(7467),s(4732),s(9577),s(2320)),m=s(8987),I=s(2302),f=s(1396),B=s.n(f),C=s(4335),v={name:"ChatPage",data(){return{isPressed:!1,isJpPressed:!1,isFsPressed:!1,istext:!1,text:"",tempText:"",recognition:null,infoList:[],infoLists:[],id:0,infoNum:0,isLoading:!1,newText:"",isPull:!1,show:!1,token:"",signature:null,isLogin:!0,mediaRecorder:null,audioContext:null,mediaStreamSource:null,scriptProcessor:null,signatureText:"89a5200f1a8487b64d1f123836b7f4788cf9495e"}},computed:{combinedText:{get(){return this.text+this.tempText},set(t){const e=this.text.length;this.text=t.substring(0,e),this.tempText=t.substring(e)}}},mounted(){console.log(this.user_id),this.getCachedData(),console.log(this.infoLists),this.scrollToBottom(),this.id=this.$route.query.id,this.token=m.A.get("token"),console.log(this.token),this.id&&this.getIdInfo()},methods:{async synthesizeSpeech(){const t=(0,I.A)(),e={Action:"TextToVoice",Version:"2019-08-23",Region:"ap-guangzhou",Timestamp:Math.floor(Date.now()/1e3),Nonce:Math.floor(1e4*Math.random()),SecretId:"AKIDJZjgvxsbCaml6Nes3JYs4A9ujQvCG6zo",Text:"你好，欢迎使用腾讯云语音合成服务",SessionId:t,VoiceType:0,Signature:this.signatureText};try{const t=await C.A.post("https://tts.tencentcloudapi.com/",e,{headers:{"Content-Type":"application/json"}});console.log(t.data)}catch(s){console.error("语音合成失败",s)}},pressButton(){this.istext||(this.istext=!0),this.isPressed=!0;const t=Math.floor((new Date).getTime()/1e3),e=t+432e4,s=(0,I.A)(),i=this.generateRandomInteger(),o="AKIDqolWFxgL9ta9leRQI6mLmGf9aCykgkjm",n="IjKqFZ0Pjy8DFJMSXZQBykR7iHk9Tk4M",r={engine_model_type:"16k_zh",expired:e,needvad:1,nonce:i,secretid:o,timestamp:t,voice_format:1,voice_id:s},A=Object.keys(r).sort().map((t=>`${t}=${r[t]}`)).join("&"),c=`asr.cloud.tencent.com/asr/v2/1324680690?${A}`,l=B().HmacSHA1(c,n),u=B().enc.Base64.stringify(l);console.log("生成的签名："+l);const d=`wss://asr.cloud.tencent.com/asr/v2/1324680690?${A}&signature=${encodeURIComponent(u)}`;try{this.signature=new WebSocket(d),console.log(this.signature),this.signature.onopen=()=>{console.log("WebSocket连接开启"),this.startSendingAudio()},this.signature.onmessage=t=>{const e=JSON.parse(t.data);e.result&&(console.log(e.result),0===e.result.slice_type||1===e.result.slice_type?this.tempText=e.result.voice_text_str:2===e.result.slice_type&&(this.tempText="",this.text+=e.result.voice_text_str))},this.signature.onclose=()=>{console.log("WebSocket连接关闭"),this.stopSendingAudio()},this.signature.onerror=t=>{console.error("WebSocket error:",t),this.stopSendingAudio()}}catch(g){console.error("WebSocket connection failed:",g),a.A.fail("启动语音失败！")}},startSendingAudio(){navigator.mediaDevices.getUserMedia({audio:!0}).then((t=>{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.mediaStreamSource=this.audioContext.createMediaStreamSource(t);const e=16e3;this.scriptProcessor=this.audioContext.createScriptProcessor(4096,1,1),this.scriptProcessor.onaudioprocess=t=>{const s=t.inputBuffer.getChannelData(0),i=this.resample(s,this.audioContext.sampleRate,e);if(this.signature.readyState===WebSocket.OPEN){const t=new ArrayBuffer(2*i.length),e=new DataView(t);i.forEach(((t,s)=>{e.setInt16(2*s,32767*t,!0)})),this.signature.send(t)}},this.mediaStreamSource.connect(this.scriptProcessor),this.scriptProcessor.connect(this.audioContext.destination)})).catch((t=>{console.error("获取用户媒体失败:",t),a.A.fail("获取用户媒体失败！"),this.releaseButton()}))},resample(t,e,s){const i=e/s,o=Math.round(t.length/i),n=new Float32Array(o);for(let a=0;a<o;a++){const e=a*i,s=Math.floor(e),o=Math.ceil(e),r=e-s;n[a]=t[s]+(t[o]-t[s])*r}return n},releaseButton(){this.isPressed=!1,this.stopSendingAudio()},stopSendingAudio(){this.scriptProcessor&&(this.scriptProcessor.disconnect(),this.scriptProcessor=null),this.mediaStreamSource&&(this.mediaStreamSource.disconnect(),this.mediaStreamSource=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.signature&&this.signature.readyState===WebSocket.OPEN&&this.signature.send(JSON.stringify({type:"end"}))},generateRandomInteger(){const t=10;return Math.floor(Math.random()*(Math.pow(10,t)-1))+1},handleTranslate(){const t=this.combinedText;console.log(t);const e={role:"user",content:t};this.newText="",this.combinedText="",this.istext=!1,this.scrollToBottom(),this.infoList.push(e);const s=localStorage.getItem("user_id");fetch("http://192.168.4.1:5010/chat/text?token="+this.token,{method:"POST",headers:{"Content-Type":"application/json;utf-8"},body:JSON.stringify({user_id:s,topic_name:"童年印象",topic_type:"standard_topic",chat_id:"01",conv_history:this.infoList})}).then((t=>{a.A.loading({message:"正在生成",duration:0,forbidClick:!0});const e={role:"assistant",content:""};this.infoList.push(e);const s=t.body.getReader(),i=new TextDecoder("utf-8");let o="";s.read().then(function t({done:e,value:n}){if(e)return void a.A.clear();const r=i.decode(n,{stream:!0});o+=r;const A=o.split("\n");return A.forEach((t=>{if(""!==t.trim()&&"null"!==t.trim())try{const e=t.replace(/^data:\s*/,""),s=JSON.parse(e);if(s.text){const t=JSON.parse(s.text);this.newText=t.join(""),this.infoList[this.infoList.length-1].content=t.join(""),this.$forceUpdate()}}catch(e){}})),s.read().then(t.bind(this))}.bind(this))})).catch((t=>{console.error(t),this.isLogin=!1,p.A.confirm({message:"登录已失效，请重新登录！"}).then((()=>{this.$router.push("/login")})).catch((()=>{})),a.A.clear()}))},getTextInit(){},GoDataPage(t){this.$router.push({path:"/datapage",query:{id:t}})},truncatedTime(t,e,s){return t.substring(e,s)},showPopup(){this.show=!0},onRefresh(){setTimeout((()=>{(0,a.A)("刷新成功"),this.isLoading=!1,0!==this.infoList.length?(this.isPull=!0,this.scrollToBottom()):a.A.fail("暂无聊天记录！")}),1e3)},BackToChat(){this.isPull=!1},getIdInfo(){const t=parseInt(this.id);this.infoList=this.infoLists.find((e=>e._id===t)).infoListItem,this.infoNum=this.infoList.length},getCurrentDateTime(){const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0");return`${e}年${s}月${i}日 ${o}:${n}`},generateUniqueId(){return Date.now()+Math.floor(1e3*Math.random())},saveInfoToCache(){if(0!==this.infoList.length){const t=this.getCurrentDateTime(),e=this.generateUniqueId(),s={time:t,_id:e,infoListItem:[...this.infoList]};this.infoLists.push(s),localStorage.setItem("infoLists",JSON.stringify(this.infoLists))}},scrollToBottom(){i.Ay.nextTick((()=>{this.$refs.scrollArea.scrollTop=this.$refs.scrollArea.scrollHeight}))},getCachedData(){const t=localStorage.getItem("infoLists");t?this.infoLists=JSON.parse(t):console.log("没有找到缓存数据")},pressJpButton(){this.isJpPressed=!0},releaseJpButton(){this.isJpPressed=!1,this.istext=!this.istext},pressFsButton(){this.combinedText&&(this.isFsPressed=!0)},releaseFsButton(){if(this.combinedText){this.isFsPressed=!1,this.handleTranslate();const t=parseInt(this.id),e=this.infoLists.findIndex((e=>e._id===t));-1!==e&&this.infoLists.splice(e,1)}}},beforeDestroy(){this.infoList.length!==this.infoNum&&this.isLogin&&this.saveInfoToCache(),this.signature&&this.signature.close()}},x=v,_=(0,c.A)(x,g,h,!1,null,"1f242103",null),E=_.exports,Q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"All"},[t.user_id?e("van-popover",{staticClass:"topIconChat",attrs:{trigger:"click",actions:t.actions,placement:"bottom-end"},on:{select:t.onSelect},scopedSlots:t._u([{key:"reference",fn:function(){return[e("div",{staticClass:"iconfont icon-geren"})]},proxy:!0}],null,!1,3563730011),model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}}):t._e(),e("div",{staticClass:"greetings"},[t._v(t._s(t.greeting))]),e("div",{staticClass:"ContentBox"},[e("div",{staticClass:"tabs"},[e("div",{class:{active:1===t.currentSlide},on:{click:function(e){return t.slideTo(1)}}},[t._v("访谈室")]),e("div",{class:{active:2===t.currentSlide},on:{click:function(e){return t.slideTo(2)}}},[t._v("编辑部")]),e("div",{class:{active:3===t.currentSlide},on:{click:function(e){return t.slideTo(3)}}},[t._v("藏卷馆")])]),e("div",{ref:"swiperContainer",staticClass:"swiper-container"},[e("div",{staticClass:"swiper-wrapper"},[e("div",{staticClass:"swiper-slide"},t._l(t.TalkBoxBgi,(function(s,i){return e("div",{key:i,staticClass:"talkBoxItem",class:[(i+1)%4===1||(i+1)%4===0?"talkBoxItemLeft":"talkBoxItemRight",i===t.activeIndex&&t.isPressed?"small":""],style:{backgroundImage:`url(${s.bgi})`,margin:i>2?"3vw 0 0 3.33%":"0 0 0 3.33%"},attrs:{onselectstart:"return false;"},on:{touchmove:t.handleMove,touchstart:function(e){return t.pressButton(i)},touchend:function(e){return t.releaseButton(s.text)}}},[e("div",{staticClass:"talkBoxItem_Text"},[t._v(t._s(s.num))]),e("div",{staticClass:"talkBoxItem_Text"},[t._v(t._s(s.text))])])})),0),e("div",{staticClass:"swiper-slide"},[t._l(t.infoLists,(function(s,i){return e("div",{key:i,staticClass:"infoItemBox",on:{click:function(e){return t.goInfoPage(s._id)}}},[e("div",{staticClass:"infoItemBox_Title"},[t._v("童年印象")]),e("div",{staticClass:"infoItemBox_TimeBox"},[e("div",[t._v(t._s(t.truncatedTime(s.time,0,11)))]),e("div",[t._v(t._s(t.truncatedTime(s.time,12,17)))])]),e("div",{staticClass:"infoItemBox_Data"},[t._v(t._s(s.infoListItem[0].content))]),e("div",{staticClass:"iconfont icon-tiaozhuan infoItemBox_Icon"})])})),0===t.infoLists.length?e("van-empty",{attrs:{description:"您还没有记录哦~"}}):t._e()],2),e("div",{staticClass:"swiper-slide"},[t._l(t.draftLists,(function(s,i){return e("div",{key:i,staticClass:"infoItemBox draftItemBox"},[s.title?t._e():e("div",{staticClass:"infoItemBox_Title"},[t._v(t._s(s.style))]),e("div",{staticClass:"infoItemBox_Title"},[t._v(t._s(s.title))]),e("div",{staticClass:"infoItemBox_TimeBox"},[e("div",[t._v(t._s(s.time))])]),e("div",{staticClass:"infoItemBox_Data draftItemBox_Data"},[t._v(t._s(s.text))]),e("div",{staticClass:"draftItemBtnBox"},[e("div",{staticClass:"draftItemBtnBox_Check",on:{click:function(e){return t.ToEditStoryPage(s.chat_id)}}},[t._v("查看")]),t._m(0,!0)])])})),0===t.draftLists.length?e("van-empty",{attrs:{description:"您还没有生成故事哦~"}}):t._e()],2)])])]),2===t.currentSlide?e("div",{staticClass:"DelBox",on:{click:t.DelAll}},[e("van-icon",{attrs:{name:"delete-o"}})],1):t._e()],1)},D=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"draftItemBtnBox_Go"},[e("i",{staticClass:"iconfont icon-fasong1"})])}],w=s(4654),y={name:"IndexPage",data(){return{user_id:"",showPopover:!1,actions:[{text:"退出登录"}],greeting:"刘奶奶,早上好!",mySwiper:null,currentSlide:1,activeIndex:null,isPressed:!1,isMove:!0,infoLists:[],draftLists:[],isLoading:!1,TalkBoxBgi:[{num:"第一篇",text:"童年印象",bgi:"https://s21.ax1x.com/2024/06/29/pkcEOsg.png"},{num:"第二篇",text:"童年玩伴",bgi:"https://s21.ax1x.com/2024/06/29/pkcV3Oe.png"},{num:"第三篇",text:"家庭记忆",bgi:"https://s21.ax1x.com/2024/06/29/pkcVGeH.png"},{num:"第四篇",text:"教育启蒙",bgi:"https://s21.ax1x.com/2024/06/30/pkcKLhd.png"},{num:"第五篇",text:"邻里乡情",bgi:"https://img.picui.cn/free/2024/06/29/66801d06f4086.png"},{num:"第六篇",text:"青春友谊",bgi:"https://img.picui.cn/free/2024/06/29/66801d3c93c78.png"},{num:"第七篇",text:"学生时代",bgi:"https://img.picui.cn/free/2024/06/29/66801e1232d09.png"},{num:"第八篇",text:"职场启程",bgi:"https://img.picui.cn/free/2024/06/29/66801e3b18825.png"},{num:"第九篇",text:"结婚成家",bgi:"https://img.picui.cn/free/2024/06/29/66801ed8ab3ed.png"},{num:"第十篇",text:"养育儿女",bgi:"https://img.picui.cn/free/2024/06/29/66801f0bbfa45.png"},{num:"第十一篇",text:"人生转折",bgi:"https://img.picui.cn/free/2024/06/29/66801f1b9d945.png"},{num:"第十二篇",text:"事业成就",bgi:"https://img.picui.cn/free/2024/06/29/66801f2b3fd95.png"}]}},watch:{currentSlide(){localStorage.setItem("currentPage",this.$data.currentSlide)}},mounted(){const t=localStorage.getItem("user_id");t?(this.user_id=t,this.getCachedData()):this.user_id="",console.log(this.user_id);var e=this;this.mySwiper=new w.A(this.$refs.swiperContainer,{loop:!1,on:{slideChange:function(){e.$data.currentSlide=this.realIndex+1}}});const s=localStorage.getItem("currentPage");s&&(this.$data.currentSlide=parseInt(s),this.mySwiper.slideToLoop(s-1))},methods:{onSelect(t){"退出登录"===t.text&&(localStorage.removeItem("user_id"),(0,a.A)("退出登录成功！"),this.$router.push("/login"))},ToEditStoryPage(t){this.$router.push({path:"editstory",query:{chat_id:t}})},DelAll(){p.A.confirm({message:"确认删除所有记录吗？"}).then((()=>{localStorage.removeItem("infoLists"),this.getCachedData(),a.A.success("删除成功！")})).catch((()=>{}))},ToActivity(){this.$router.push("/active")},onRefresh(){setTimeout((()=>{(0,a.A)("刷新成功"),this.isLoading=!1,this.count++}),1e3)},addDiv(){},goInfoPage(t){this.$router.push({path:"/datapage",query:{id:t}})},truncatedTime(t,e,s){return t.substring(e,s)},getCachedData(){const t=localStorage.getItem("infoLists");this.infoLists=t?JSON.parse(t):[];const e=localStorage.getItem("draftLists");this.draftLists=e?JSON.parse(e):[]},slideTo(t){t<1?t=1:t>3&&(t=3),this.mySwiper.slideToLoop(t-1),this.currentSlide=t},pressButton(t){this.isMove=!0,this.activeIndex=t,this.isPressed=!0},releaseButton(t){this.isPressed=!1,this.isMove&&(this.user_id?this.$router.push("/chat?style="+t):p.A.confirm({message:"您还未登录，是否先去登录？"}).then((()=>{this.$router.push("/login")})).catch((()=>{})))},handleMove(){this.isMove=!1}}},M=y,b=(0,c.A)(M,Q,D,!1,null,"b7dfadf4",null),G=b.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"All"},[e("div",{staticClass:"TimeBox"},[e("div",{staticClass:"Time"},[e("div",[t._v(t._s(t.truncatedTime(t.dataList.time,0,11)))]),e("div",[t._v(t._s(t.truncatedTime(t.dataList.time,12,17)))])]),e("div",{staticClass:"Title"},[t._v("童年印象")])]),e("div",{ref:"scrollArea",staticClass:"MiddleBox"},t._l(t.dataList.infoListItem,(function(s,i){return e("div",{key:i,staticClass:"DataBox",staticStyle:{"overflow-y":"scroll"}},[e("div",{staticClass:"DataItemBox",class:{"align-right":"user"===s.role,"align-left":"assistant"===s.role}},[e("div",{class:{DataItem1:"user"===s.role,DataItem2:"assistant"===s.role}},[t._v(t._s(s.content))])])])})),0),e("div",{staticClass:"bottomBox"},[e("div",{staticClass:"bottomBox_Item continuouTalk",class:{small:t.isPressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseButton.apply(null,arguments)}}},[t._v(" 接着聊 "),e("i",{staticClass:"iconfont icon-chat",staticStyle:{color:"#7B8F43"}})]),e("div",{staticClass:"bottomBox_Item continuouStory",class:{small:t.isStoryPressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressStoryButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseStoryButton.apply(null,arguments)}}},[t._v(" 生成故事 "),e("i",{staticClass:"iconfont icon-jiantou",staticStyle:{color:"#1C4511"}})]),e("div",{staticClass:"delIcon",class:{small:t.isDelPressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressDelButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseDelButton.apply(null,arguments)}}},[e("van-icon",{attrs:{name:"delete-o"}})],1)])])},Y=[],P={name:"DataPage",data(){return{isPressed:!1,isStoryPressed:!1,isDelPressed:!1,dataList:{},infoLists:[],timeData:""}},mounted(){this.getCachedData();const t=parseInt(this.$route.query.id);t&&(this.dataList=this.infoLists.find((e=>e._id===t)))},methods:{getCachedData(){const t=localStorage.getItem("infoLists");t?this.infoLists=JSON.parse(t):console.log("没有找到缓存数据")},saveInfoToCache(){localStorage.setItem("infoLists",JSON.stringify(this.infoLists))},DelInfo(){p.A.confirm({message:"确认删除该条记录吗？"}).then((()=>{const t=parseInt(this.dataList._id);console.log(this.infoLists);const e=this.infoLists.findIndex((e=>e._id===t));-1!==e&&this.infoLists.splice(e,1),console.log(this.infoLists),this.saveInfoToCache(),console.log(this.infoLists),this.$router.push("/")})).catch((()=>{}))},pressButton(){this.isPressed=!0},releaseButton(){this.isPressed=!1,this.$router.replace({path:"/chat",query:{id:this.dataList._id}})},releaseStoryButton(){this.isStoryPressed=!1,this.$router.replace({path:"/edit",query:{data:this.dataList}})},pressStoryButton(){this.isStoryPressed=!0},pressDelButton(){this.isDelPressed=!0},releaseDelButton(){this.isDelPressed=!1,this.DelInfo()},truncatedTime(t,e,s){return t.substring(e,s)}}},L=P,T=(0,c.A)(L,S,Y,!1,null,"60c260bf",null),k=T.exports,$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"All",staticStyle:{"box-sizing":"border-box"}},[e("van-tabs",{staticClass:"TabsBox",attrs:{background:"#80A281","title-inactive-color":"#666",sticky:"",color:"#e0c37b"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[e("van-tab",{attrs:{title:"",disabled:""}},[t._v("内容 1")]),e("van-tab",{staticClass:"recommendBox",attrs:{title:"推荐"}},[e("div",{staticClass:"recommendItem"},t._l(t.dividedZpList[0],(function(s){return e("div",{key:s.id,staticClass:"recommendItem_Box",on:{click:function(e){return t.goContentInfoPage(s.id)}}},[s.bgi?e("div",{staticClass:"recommendItem_Img"},[e("img",{attrs:{src:s.bgi[0]}})]):t._e(),e("div",{staticClass:"recommendItem_Content"},[e("div",{staticClass:"recommendItem_title"},[t._v(t._s(s.title))]),e("div",{staticClass:"recommendItem_text"},[t._v(t._s(s.content))]),e("div",{staticClass:"recommendItem_dz"},[e("van-icon",{attrs:{name:"good-job-o"}}),t._v(t._s(s.dz))],1)])])})),0),e("div",{staticClass:"recommendItem"},t._l(t.dividedZpList[1],(function(s){return e("div",{key:s.id,staticClass:"recommendItem_Box",on:{click:function(e){return t.goContentInfoPage(s.id)}}},[s.bgi?e("div",{staticClass:"recommendItem_Img"},[e("img",{attrs:{src:s.bgi[0]}})]):t._e(),e("div",{staticClass:"recommendItem_Content"},[e("div",{staticClass:"recommendItem_title"},[t._v(t._s(s.title))]),e("div",{staticClass:"recommendItem_text"},[t._v(t._s(s.content))]),e("div",{staticClass:"recommendItem_dz"},[e("van-icon",{attrs:{name:"good-job-o"}}),t._v(t._s(s.dz))],1)])])})),0)]),e("van-tab",{attrs:{title:"地图"}},[t._v("内容 2")]),e("van-tab",{attrs:{title:"好友"}},[t._v("内容 3")]),e("van-tab",{attrs:{title:"",disabled:""}},[t._v("内容")])],1)],1)],1)},j=[],R={name:"ActivityPage",data(){return{active:0,isLoading:!1,recommendList:[{id:1,title:"12项涉税服务措施落地 小微企业向“新”而行",content:"“6万元的税费‘红包’从‘纸上’落到企业账上，政策提振了企业的发展信心。”近日，在安徽芜湖无为市，一家经营液压机、粉碎机等机械制造和销售的制造业小微企业收到了税费政策“礼包”。\n记者了解到，当地税务部门通过与退役军人事务局交换信息数据，发现该机械制造公司招录10名退役士兵，随即辅导企业享受自主就业退役士兵创业就业税收政策优惠政策。\n政策红利变助力企业发展的“真金白银”，这是税费支持政策支持小微企业发展的生动实践。\n小微企业是吸纳就业的主力军、经济发展的生力军。近年来，税务部门为支持小微企业发展出台了一系列措施，取得了积极成效。国家税务总局数据显示，去年中国新办涉税经营主体达到1687.6万户，同比增长28.3%。这些首次到税务部门办理税种认定、发票领用、申报纳税等涉税事项的经营主体，不少是小微企业。\n近日，税务总局和全国工商联发布《2024年助力小微经营主体发展“春雨润苗”专项行动方案》(以下简称《方案》)，在延续并深化以往三年“春雨润苗”行动10大类系列活动36项服务措施基础上，2024年重点推出12项服务措施，核心内容是提高小微经营主体办税效率，压缩办税成本，解决“急难愁盼”问题，以推动优化民营经济发展环境。",dz:123,bgi:["https://img1.artron.net/artist/A0000013/brt00001300105.jpg","https://img.zcool.cn/community/0135075e4fe43ba80120a8954f2869.jpg@1280w_1l_2o_100sh.jpg"]},{id:2,title:"全国超70个城市推行住房“以旧换新” 助力美好安居、激活房地产市场",content:"我们看到，各地住房“以旧换新”的模式主要是中介优先卖和国企收旧换新两种。其中，对于很多想换房的人来说，国企收购是一种比较新鲜的模式，到底是如何进行的？我们下面就通过武汉的做法来具体了解一下。\n\n在武汉硚口区，通过政府搭建的平台，相关国有企业将老房子收购。目前，当地刚刚对“以旧换新”的项目库进行了扩容，筹集了8个开发商，包含10个在售新房项目。同时还对相关政策进行了进一步调整，旧房面积由最初的120平方米以下调整为140平方米以下，老旧房屋价格从不得高于所购新房总价的70%，调整为不得高于所购新房总价。此外，原来的一套存量房只能置换一套新房，现在调整为最多允许三套房源置换一套新房。假如购房人选中了一套总价210万元的新房，他的操作流程应该是这样的。",dz:123,bgi:["https://th.bing.com/th/id/R.d761768122c59c824548af9a319b2a9b?rik=aT6CTHLSGXlbHw&riu=http%3a%2f%2fseopic.699pic.com%2fphoto%2f50017%2f0763.jpg_wh1200.jpg&ehk=a9yqHVMDyyNnX7eIrDspUnGgDaUdUPRIRB1hXCbaiJU%3d&risl=&pid=ImgRaw&r=0"]},{id:3,title:"央广财评|韧性强、底气足！多组数据折射中国经济提“质”向“新”",content:"近日，世界银行上调对中国经济的增长预期。外交部发言人回应：“面对复杂多变的国际环境，中国经济有底气、有力量破浪前行。”\n中国经济何以有底气、有力量破浪前行？近期公布的多份5月经济运行数据绘就中国经济运行之“势”。随着各项支持政策加力显效，消费潜力加速释放，外贸向好势头不减，国内国际双循环相互促进，投资、消费、出口“三驾马车”持续发力，持续释放出经济运行提质向好的积极信号。",dz:123,bgi:[]},{id:4,title:"中国的新发展是世界的大机遇（和音）",content:"“出口增长强劲”“制造业增速超出预期”“宏观数据一直很稳固”……国际机构近期纷纷对中国经济做出乐观分析并上调增长预期，充分表明国际社会对中国经济充满信心。中国经济回升向好态势持续巩固增强，不仅给世界带来信心的提升，也意味着各方将从中国的新发展中获得更多新机遇。\n看好中国经济，这是国际社会的主流声音。世界银行日前发布的最新一期《全球经济展望》报告，将2024年中国经济增速预期较今年1月上调0.3个百分点至4.8%。国际货币基金组织将今年中国经济增速预期上调至5%，较此前预测值提升0.4个百分点。联合国5月中旬发布报告，对中国经济增长率的预测由今年1月的4.7%上调至4.8%。亚洲开发银行、摩根士丹利、高盛、瑞银等国际金融机构也纷纷上调对中国经济增速的预期。这些都表明，中国仍是世界经济增长最重要的稳定器和动力源。",dz:123,bgi:["https://img.shetu66.com/2022/08/31/1661927053957755.jpg","https://img.zcool.cn/community/0135075e4fe43ba80120a8954f2869.jpg@1280w_1l_2o_100sh.jpg"]},{id:5,title:"5月70大中城市二手房价全部下跌，楼市底部或已不远",content:"国家统计局周一公布的70大中城市房价数据显示，5月，全国房价延续下跌态势，其中，新房价格环比上涨的城市只有2个，较上月减少4个；二手房市场继去年12月后再度全军覆没，无一城市环比上涨。\n根据分析师测算，5月，全国70城新房价格指数环比下跌0.7%，连续12个月下跌，跌幅比4月扩大0.1个百分点；二手房价格指数环比下跌1.0%，连续14个月下跌，跌幅比4月扩大0.1个百分点，且创近十年新低。",dz:123,bgi:["https://img.shetu66.com/2023/06/28/1687934812326957.jpg","https://img.zcool.cn/community/0135075e4fe43ba80120a8954f2869.jpg@1280w_1l_2o_100sh.jpg"]},{id:6,title:"与涉黄经营老板起冲突，小伙被扔下楼受伤反被拘押，警方11年后立案",content:"2013年的6月15日，27岁的杨银宝在西安的一家会馆被人从6楼扔下，侥幸捡得一条命。然而，没等来西安警方追究加害者的责任，自己却被以涉嫌诽谤犯罪为由拘押失去自由，他的女朋友也未能幸免。后来，办理了取保候审的杨银宝拖着伤残的身体离开西安到银川打工。\n11年来，杨银宝在银川结婚生子，逐渐从伤痛中走了出来，但是一想起自己从受害者变成嫌疑人，脑海里全是苦涩的记忆。近日，收到西安市公安局经济技术开发区分局的立案告知书，他再次满心疑虑返回西安：“11年了才立案，还能查得清吗？”",dz:123,bgi:["https://img.shetu66.com/2023/07/28/1690508060414737.png","https://img.zcool.cn/community/0135075e4fe43ba80120a8954f2869.jpg@1280w_1l_2o_100sh.jpg"]}]}},mounted(){},computed:{dividedZpList(){const t=Math.ceil(this.recommendList.length/2);return[this.recommendList.slice(0,t),this.recommendList.slice(t,2*t)]}},methods:{goContentInfoPage(t){this.$router.push({path:"/contentinfo",query:{id:t}})},onRefresh(){setTimeout((()=>{(0,a.A)("刷新成功"),this.isLoading=!1,this.count++}),1e3)}}},N=R,O=(0,c.A)(N,$,j,!1,null,"6580c4bc",null),z=O.exports,J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"All"},[e("van-swipe",{on:{change:t.onChange}},t._l(t.recommendItem.bgi,(function(s,i){return e("van-swipe-item",{key:i,on:{click:t.previewImg}},[e("div",{staticClass:"Img_Box"},[e("img",{attrs:{src:s,alt:""}})])])})),1),e("div",{staticClass:"Text_Box"},[e("div",{staticClass:"Text_Box_Title"},[t._v(t._s(t.recommendItem.title))]),e("div",{staticClass:"Text_Box_Content"},[t._v(t._s(t.recommendItem.content))])])],1)},U=[],F=s(2900),q={name:"ContentInfoPage",data(){return{id:0,recommendItem:{},current:0,recommendList:[{id:1,title:"12项涉税服务措施落地 小微企业向“新”而行",content:"“6万元的税费‘红包’从‘纸上’落到企业账上，政策提振了企业的发展信心。”近日，在安徽芜湖无为市，一家经营液压机、粉碎机等机械制造和销售的制造业小微企业收到了税费政策“礼包”。\n小微企业是吸纳就业的主力军、经济发展的生力军。近年来，税务部门为支持小微企业发展出台了一系列措施，取得了积极成效。国家税务总局数据显示，去年中国新办涉税经营主体达到1687.6万户，同比增长28.3%。这些首次到税务部门办理税种认定、发票领用、申报纳税等涉税事项的经营主体，不少是小微企业。\n近日，税务总局和全国工商联发布《2024年助力小微经营主体发展“春雨润苗”专项行动方案》(以下简称《方案》)，在延续并深化以往三年“春雨润苗”行动10大类系列活动36项服务措施基础上，2024年重点推出12项服务措施，核心内容是提高小微经营主体办税效率，压缩办税成本，解决“急难愁盼”问题，以推动优化民营经济发展环境。",dz:123,bgi:["https://img1.artron.net/artist/A0000013/brt00001300105.jpg","https://img.zcool.cn/community/0135075e4fe43ba80120a8954f2869.jpg@1280w_1l_2o_100sh.jpg"]},{id:2,title:"全国超70个城市推行住房“以旧换新” 助力美好安居、激活房地产市场",content:"我们看到，各地住房“以旧换新”的模式主要是中介优先卖和国企收旧换新两种。其中，对于很多想换房的人来说，国企收购是一种比较新鲜的模式，到底是如何进行的？我们下面就通过武汉的做法来具体了解一下。\n在武汉硚口区，通过政府搭建的平台，相关国有企业将老房子收购。目前，当地刚刚对“以旧换新”的项目库进行了扩容，筹集了8个开发商，包含10个在售新房项目。同时还对相关政策进行了进一步调整，旧房面积由最初的120平方米以下调整为140平方米以下，老旧房屋价格从不得高于所购新房总价的70%，调整为不得高于所购新房总价。此外，原来的一套存量房只能置换一套新房，现在调整为最多允许三套房源置换一套新房。假如购房人选中了一套总价210万元的新房，他的操作流程应该是这样的。",dz:123,bgi:["https://th.bing.com/th/id/R.d761768122c59c824548af9a319b2a9b?rik=aT6CTHLSGXlbHw&riu=http%3a%2f%2fseopic.699pic.com%2fphoto%2f50017%2f0763.jpg_wh1200.jpg&ehk=a9yqHVMDyyNnX7eIrDspUnGgDaUdUPRIRB1hXCbaiJU%3d&risl=&pid=ImgRaw&r=0"]},{id:3,title:"央广财评|韧性强、底气足！多组数据折射中国经济提“质”向“新”",content:"近日，世界银行上调对中国经济的增长预期。外交部发言人回应：“面对复杂多变的国际环境，中国经济有底气、有力量破浪前行。”\n中国经济何以有底气、有力量破浪前行？近期公布的多份5月经济运行数据绘就中国经济运行之“势”。随着各项支持政策加力显效，消费潜力加速释放，外贸向好势头不减，国内国际双循环相互促进，投资、消费、出口“三驾马车”持续发力，持续释放出经济运行提质向好的积极信号。",dz:123,bgi:[]},{id:4,title:"中国的新发展是世界的大机遇（和音）",content:"“出口增长强劲”“制造业增速超出预期”“宏观数据一直很稳固”……国际机构近期纷纷对中国经济做出乐观分析并上调增长预期，充分表明国际社会对中国经济充满信心。中国经济回升向好态势持续巩固增强，不仅给世界带来信心的提升，也意味着各方将从中国的新发展中获得更多新机遇。\n看好中国经济，这是国际社会的主流声音。世界银行日前发布的最新一期《全球经济展望》报告，将2024年中国经济增速预期较今年1月上调0.3个百分点至4.8%。国际货币基金组织将今年中国经济增速预期上调至5%，较此前预测值提升0.4个百分点。联合国5月中旬发布报告，对中国经济增长率的预测由今年1月的4.7%上调至4.8%。亚洲开发银行、摩根士丹利、高盛、瑞银等国际金融机构也纷纷上调对中国经济增速的预期。这些都表明，中国仍是世界经济增长最重要的稳定器和动力源。",dz:123,bgi:["https://img.shetu66.com/2022/08/31/1661927053957755.jpg","https://img.zcool.cn/community/0135075e4fe43ba80120a8954f2869.jpg@1280w_1l_2o_100sh.jpg"]},{id:5,title:"5月70大中城市二手房价全部下跌，楼市底部或已不远",content:"国家统计局周一公布的70大中城市房价数据显示，5月，全国房价延续下跌态势，其中，新房价格环比上涨的城市只有2个，较上月减少4个；二手房市场继去年12月后再度全军覆没，无一城市环比上涨。\n根据分析师测算，5月，全国70城新房价格指数环比下跌0.7%，连续12个月下跌，跌幅比4月扩大0.1个百分点；二手房价格指数环比下跌1.0%，连续14个月下跌，跌幅比4月扩大0.1个百分点，且创近十年新低。",dz:123,bgi:["https://img.shetu66.com/2023/06/28/1687934812326957.jpg","https://img.zcool.cn/community/0135075e4fe43ba80120a8954f2869.jpg@1280w_1l_2o_100sh.jpg"]},{id:6,title:"与涉黄经营老板起冲突，小伙被扔下楼受伤反被拘押，警方11年后立案",content:"2013年的6月15日，27岁的杨银宝在西安的一家会馆被人从6楼扔下，侥幸捡得一条命。然而，没等来西安警方追究加害者的责任，自己却被以涉嫌诽谤犯罪为由拘押失去自由，他的女朋友也未能幸免。后来，办理了取保候审的杨银宝拖着伤残的身体离开西安到银川打工。\n11年来，杨银宝在银川结婚生子，逐渐从伤痛中走了出来，但是一想起自己从受害者变成嫌疑人，脑海里全是苦涩的记忆。近日，收到西安市公安局经济技术开发区分局的立案告知书，他再次满心疑虑返回西安：“11年了才立案，还能查得清吗？”",dz:123,bgi:["https://img.shetu66.com/2023/07/28/1690508060414737.png","https://img.zcool.cn/community/0135075e4fe43ba80120a8954f2869.jpg@1280w_1l_2o_100sh.jpg"]}]}},mounted(){this.$data.id=parseInt(this.$route.query.id),this.$data.recommendItem=this.$data.recommendList.find((t=>t.id===this.$data.id))},methods:{onChange(t){this.current=t,console.log(this.current+1)},previewImg(){(0,F.A)({images:this.$data.recommendItem.bgi,startPosition:this.$data.current})}}},H=q,W=(0,c.A)(H,J,U,!1,null,"4687a39a",null),V=W.exports,X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"All"},[t._m(0),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"userName_Box input_ItemBox"},[e("div",{staticClass:"input_ItemBox_text"},[t._v("用户名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"pW_Box input_ItemBox"},[e("div",{staticClass:"input_ItemBox_text"},[t._v("密码")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("div",{staticClass:"LoginBtn",class:{small:t.isPressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseButton.apply(null,arguments)}}},[t._v(" 登录 ")]),e("div",{staticClass:"registerBox"},[e("div",[t._v("忘记密码")]),e("div",{on:{click:function(e){return t.goRegister()}}},[t._v("注册")])])])])},Z=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgiBox"},[e("img",{attrs:{src:s(1642),alt:""}})])}];const K=C.A.create({baseURL:"http://192.168.4.1:5010",withCredentials:!0});var tt=K,et={name:"LoginPage",data(){return{isPressed:!1,username:"",password:"",userList:[]}},mounted(){},beforeCreate(){},methods:{pressButton(){this.isPressed=!0},releaseButton(){if(this.isPressed=!1,this.username&&this.password){const t={username:this.username,password:this.password};tt.post("/user/login",t).then((t=>{if(0===t.data.code){const e=t.data.data.userInfo.user_id;localStorage.setItem("user_id",e);const s=t.data.data.token;m.A.set("token",s,{expires:365}),console.log(m.A.get("token")),(0,a.A)("登录成功！"),this.$router.replace({name:"index"})}}))}else(0,a.A)("请将信息填写完整！")},goRegister(){this.$router.replace({name:"register"})}}},st=et,it=(0,c.A)(st,X,Z,!1,null,"8923675e",null),ot=it.exports,nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"All"},[t._m(0),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"userName_Box input_ItemBox"},[e("div",{staticClass:"input_ItemBox_text"},[t._v("*用户名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"pW_Box input_ItemBox"},[e("div",{staticClass:"input_ItemBox_text"},[t._v("*密码")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("div",{staticClass:"pW_Box input_ItemBox"},[e("div",{staticClass:"input_ItemBox_text"},[t._v("*手机号")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{type:"text"},domProps:{value:t.mobile},on:{input:function(e){e.target.composing||(t.mobile=e.target.value)}}})]),e("div",{staticClass:"LoginBtn",class:{small:t.isPressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseButton.apply(null,arguments)}}},[t._v(" 登录 ")])])])},at=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgiBox"},[e("img",{attrs:{src:s(1642),alt:""}})])}],rt={name:"RegisterPage",data(){return{isPressed:!1,username:"",password:"",mobile:""}},mounted(){},methods:{pressButton(){this.isPressed=!0},releaseButton(){if(this.isPressed=!1,this.username&&this.password&&this.mobile){const t={username:this.username,password:this.password,mobile:this.mobile};tt.post("/user/register",t).then((t=>{if(0===t.data.code){const e=t.data.data.user_id;localStorage.setItem("user_id",e),(0,a.A)("登录成功！"),this.$router.replace({name:"index"})}})).catch((t=>{console.log(t),a.A.fail("该用户已存在！")}))}else(0,a.A)("信息未填写完整")}}},At=rt,ct=(0,c.A)(At,nt,at,!1,null,"3ef688be",null),lt=ct.exports,ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"EditAll"},[e("div",{staticClass:"DialogBox"},t._l(t.dataList,(function(s){return e("div",{key:s.id,staticClass:"DialogBox_Item"},[t._v(" "+t._s(s.content)+" ")])})),0),e("div",{staticClass:"Generate_Box_Big"},[e("van-popover",{staticClass:"Generate_Box",attrs:{trigger:"click",actions:t.actions},on:{select:t.onSelect},scopedSlots:t._u([{key:"reference",fn:function(){return[t._v(" 风格 "),e("span",{staticStyle:{"margin-left":"5px",color:"#80A281","font-weight":"500"}},[t._v(t._s(t.style))]),e("i",{staticClass:"icon-xiala iconfont Generate_Icon"})]},proxy:!0}]),model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}})],1),e("div",{staticClass:"Generate_Btn",class:{small:t.isGeneratePressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressGenerateButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseGenerateButton.apply(null,arguments)}}},[t._v(" 生成草稿 ")]),e("div",{staticClass:"DraftBox"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.draftText,expression:"draftText"}],staticClass:"DraftArea",domProps:{value:t.draftText},on:{input:function(e){e.target.composing||(t.draftText=e.target.value)}}})]),e("div",{staticClass:"bottomBox"},[e("div",{staticClass:"SaveDraftBox",class:{small:t.isSavePressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressSaveButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseSaveButton.apply(null,arguments)}}},[t._v("保存草稿")]),e("div",{staticClass:"ResetDraftBox",class:{small:t.isResetPressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(e){return e.stopPropagation(),t.pressResetButton.apply(null,arguments)},touchend:function(e){return e.stopPropagation(),t.releaseResetButton.apply(null,arguments)}}},[t._v("重置")])])])},dt=[],gt={name:"EditPage",data(){return{dataList:[],style:"",showPopover:!1,draftLists:[],actions:[{text:"默认"},{text:"童年印象"},{text:"儿时玩伴"},{text:"家庭记忆"}],isGeneratePressed:!1,isSavePressed:!1,isResetPressed:!1,draftText:""}},mounted(){this.dataList=this.$route.query.data.infoListItem,this.style=this.actions[0].text;const t=localStorage.getItem("draftLists");t?(this.draftLists=JSON.parse(t),console.log(this.draftLists)):console.log("未找到藏卷馆信息")},methods:{onSelect(t){this.style=t.text},generateRandomId(){return Math.random().toString(36).substr(2,9)},getCurrentDateTime(){const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0");return`${e}年${s}月${i}日 ${o}:${n}`},pressGenerateButton(){this.isGeneratePressed=!0},releaseGenerateButton(){this.isGeneratePressed=!1,this.dataList.forEach((t=>{this.draftText+=t.content}))},pressSaveButton(){this.isSavePressed=!0},releaseSaveButton(){this.isSavePressed=!1,this.draftText?p.A.confirm({message:"确定保存草稿吗？"}).then((()=>{a.A.loading({message:"正在保存",duration:0,forbidClick:!0});const t={chat_id:this.generateRandomId(),text:this.draftText,style:this.style,time:this.getCurrentDateTime(),title:""};this.draftLists.push(t),localStorage.setItem("draftLists",JSON.stringify(this.draftLists)),a.A.clear(),this.$router.replace("/")})).catch((()=>{})):a.A.fail("请先生成草稿！")},pressResetButton(){this.isResetPressed=!0},releaseResetButton(){this.isResetPressed=!1,this.style=this.actions[0].text,this.draftText="",a.A.success("重置完成！")}}},ht=gt,pt=(0,c.A)(ht,ut,dt,!1,null,"711bbca8",null),mt=pt.exports,It=function(){var t=this,e=t._self._c;return e("div",{staticClass:"All"},[t._m(0),e("div",{staticClass:"LastEditBox"},[t._v(" 上次编辑："+t._s(t.storyItem.time)+" ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.storyItem.title,expression:"storyItem.title"}],staticClass:"AddTitleBox",attrs:{placeholder:"给这个故事起个名字吧"},domProps:{value:t.storyItem.title},on:{input:function(e){e.target.composing||t.$set(t.storyItem,"title",e.target.value)}}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.storyItem.text,expression:"storyItem.text"}],staticClass:"EditTextBox",domProps:{value:t.storyItem.text},on:{input:function(e){e.target.composing||t.$set(t.storyItem,"text",e.target.value)}}}),e("div",{staticClass:"bottomBtnBox"},[e("div",{staticClass:"cancelSave",on:{click:function(e){return t.cancelSave()}}},[t._v(" 放弃修改 "),e("i",{staticClass:"icon-quxiaobaocun iconfont"})]),e("div",{staticClass:"Save",on:{click:function(e){return t.Save()}}},[t._v(" 保存进度 "),e("i",{staticClass:"icon-baocun iconfont"})]),t._m(1)])])},ft=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgiBox"},[e("img",{attrs:{src:s(1592),alt:""}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"Go"},[e("i",{staticClass:"iconfont icon-fasong1"})])}],Bt={name:"EditStoryPage",data(){return{storyItem:{},draftLists:[]}},mounted(){this.getDraftLists();const t=this.$route.query.chat_id;t&&(this.storyItem=this.draftLists.find((e=>e.chat_id===t))),console.log(this.storyItem)},methods:{getCurrentDateTime(){const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0");return`${e}年${s}月${i}日 ${o}:${n}`},getDraftLists(){const t=localStorage.getItem("draftLists");this.draftLists=t?JSON.parse(t):[]},cancelSave(){this.$router.replace({name:"index"})},Save(){const t=this.storyItem.chat_id;console.log(t);const e=this.draftLists.findIndex((e=>e.chat_id===t));-1!==e&&this.draftLists.splice(e,1),this.storyItem.time=this.getCurrentDateTime(),console.log(this.storyItem),this.draftLists.push(this.storyItem),localStorage.setItem("draftLists",JSON.stringify(this.draftLists)),this.$router.replace({name:"index"})}}},Ct=Bt,vt=(0,c.A)(Ct,It,ft,!1,null,"ea128b9c",null),xt=vt.exports;i.Ay.use(d.Ay);const _t=[{path:"/login",name:"login",component:ot,meta:{title:"时光之语"}},{path:"/register",name:"register",component:lt,meta:{title:"时光之语"}},{path:"/chat",name:"chat",component:E,meta:{title:"时光之语                                                           "}},{path:"/",name:"index",component:G,meta:{title:"时光之语"}},{path:"/datapage",name:"datapage",component:k,meta:{title:"时光之语"}},{path:"/active",name:"active",component:z,meta:{title:"时光之语"}},{path:"/contentinfo",name:"contentinfo",component:V,meta:{title:"时光之语"}},{path:"/edit",name:"edit",component:mt,meta:{title:"时光之语"}},{path:"/editstory",name:"editstory",component:xt,meta:{title:"时光之语"}}],Et=new d.Ay({routes:_t});var Qt=Et,Dt=s(5353);i.Ay.use(Dt.Ay);var wt=new Dt.Ay.Store({state:{userId:null},getters:{getUserId:t=>t.userId},mutations:{setUserId(t,e){t.userId=e}},actions:{setUserId({commit:t},e){t("setUserId",e)}},modules:{}}),yt=s(5954);s(2241);i.Ay.use(yt.Ay),i.Ay.config.productionTip=!1,new i.Ay({router:Qt,store:wt,render:t=>t(u)}).$mount("#app")},1642:function(t,e,s){"use strict";t.exports=s.p+"static/img/bgc1.fc1531e3.png"},1592:function(t){"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAANMCAYAAABYbAoeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAApvSURBVHgB7dVBAYAgAAAxNLkVjEMGSvHhwXXYSuyZ6/8GABzvAICLGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQYgAgxABAiAGAEAMAIQYAQgwAhBgACDEAEGIAIMQAQIgBgBADACEGAEIMAIQYAAgxABBiACDEAECIAYAQAwAhBgBCDACEGAAIMQAQG1esCS0PgPgWAAAAAElFTkSuQmCC"},477:function(){}},e={};function s(i){var o=e[i];if(void 0!==o)return o.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,i,o,n){if(!i){var a=1/0;for(l=0;l<t.length;l++){i=t[l][0],o=t[l][1],n=t[l][2];for(var r=!0,A=0;A<i.length;A++)(!1&n||a>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[A])}))?i.splice(A--,1):(r=!1,n<a&&(a=n));if(r){t.splice(l--,1);var c=o();void 0!==c&&(e=c)}}return e}n=n||0;for(var l=t.length;l>0&&t[l-1][2]>n;l--)t[l]=t[l-1];t[l]=[i,o,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p=""}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,n,a=i[0],r=i[1],A=i[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(A)var l=A(s)}for(e&&e(i);c<a.length;c++)n=a[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(l)},i=self["webpackChunkaichat"]=self["webpackChunkaichat"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(2248)}));i=s.O(i)})();
//# sourceMappingURL=app.7010ee57.js.map