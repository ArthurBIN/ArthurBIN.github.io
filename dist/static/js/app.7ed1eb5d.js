(function(){"use strict";var t={9175:function(t,s,e){var i=e(5471),o=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"TopBox"},["/"!==t.$route.path?s("div",{staticClass:"topIcon iconfont icon-a-037_zhuye32",on:{click:function(s){return t.goIndex()}}}):t._e(),s("div",{staticClass:"TitleBox"},[t._v(t._s(t.$route.meta.title))])]),s("div",{staticStyle:{"padding-top":"60px"}},[s("router-view")],1)])},n=[],a=(e(4114),{name:"app",components:{},methods:{goIndex(){this.$router.push("/")}}}),r=a,l=e(1656),c=(0,l.A)(r,o,n,!1,null,null,null),u=c.exports,d=e(173),h=function(){var t=this,s=t._self._c;return s("div",{staticClass:"All"},[s("div",{ref:"scrollArea",staticClass:"MiddleBox"},t._l(t.infoList,(function(e,i){return s("div",{key:i,staticClass:"DataBox",staticStyle:{"overflow-y":"scroll"}},[s("div",{staticClass:"DataItemBox",class:{"align-right":1===e.id,"align-left":2===e.id}},[s("div",{class:{DataItem1:1===e.id,DataItem2:2===e.id}},[t._v(t._s(e.data))])])])})),0),s("div",{staticClass:"speakBigBox"},[t.istext?s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"speakText",domProps:{value:t.text},on:{input:function(s){s.target.composing||(t.text=s.target.value)}}}):t._e(),s("div",{staticClass:"speakBox_Two"},[s("div",{staticClass:"jianPan",class:{small:t.isJpPressed},style:t.istext?{backgroundColor:"#4fabe5"}:{backgroundColor:"gray"},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(s){return s.stopPropagation(),t.pressJpButton.apply(null,arguments)},touchend:function(s){return s.stopPropagation(),t.releaseJpButton.apply(null,arguments)}}},[s("i",{staticClass:"iconfont icon-jianpan1"})]),s("div",{staticClass:"SpeakBox",class:{small:t.isPressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(s){return s.stopPropagation(),t.pressButton.apply(null,arguments)},touchend:function(s){return s.stopPropagation(),t.releaseButton.apply(null,arguments)}}},[s("i",{staticClass:"ht iconfont icon-huatong"}),t._v(" 按住说话 ")]),s("div",{staticClass:"faSong",class:{small:t.isFsPressed},style:t.text?{backgroundColor:"#4fabe5"}:{backgroundColor:"gray"},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(s){return s.stopPropagation(),t.pressFsButton.apply(null,arguments)},touchend:function(s){return s.stopPropagation(),t.releaseFsButton.apply(null,arguments)}}},[s("i",{staticClass:"iconfont icon-fasong1"})])])])])},p=[],f=e(4335),g={name:"HomeView",data(){return{isPressed:!1,isJpPressed:!1,isFsPressed:!1,istext:!1,text:"",recognition:null,infoList:[],infoLists:[],id:0,infoNum:0}},mounted(){this.getCachedData(),this.scrollToBottom(),this.id=this.$route.query.id,this.id&&this.getIdInfo()},methods:{getIdInfo(){const t=parseInt(this.id);this.infoList=this.infoLists.find((s=>s._id===t)).infoListItem,this.infoNum=this.infoList.length},getCurrentDateTime(){const t=new Date,s=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0");return`${s}年${e}月${i}日 ${o}:${n}`},generateUniqueId(){return Date.now()+Math.floor(1e3*Math.random())},saveInfoToCache(){if(0!==this.infoList.length){const t=this.getCurrentDateTime(),s=this.generateUniqueId(),e={time:t,_id:s,infoListItem:[...this.infoList]};this.infoLists.push(e),console.log(this.infoLists),localStorage.setItem("infoLists",JSON.stringify(this.infoLists))}},scrollToBottom(){i.Ay.nextTick((()=>{this.$refs.scrollArea.scrollTop=this.$refs.scrollArea.scrollHeight}))},getCachedData(){const t=localStorage.getItem("infoLists");t?this.infoLists=JSON.parse(t):console.log("没有找到缓存数据")},pressButton(){this.istext||(this.istext=!0),this.isPressed=!0,this.recognition=new window.webkitSpeechRecognition,this.recognition.lang="zh-CN",this.recognition.continuous=!0,this.recognition.onresult=t=>{this.$data.text=t.results[t.results.length-1][0].transcript;for(let s=0;s<t.results.length;s++)console.log(t.results[s][0].transcript)},this.recognition.start()},releaseButton(){this.recognition&&(this.recognition.stop(),this.recognition=null),this.isPressed=!1},pressJpButton(){this.isJpPressed=!0},releaseJpButton(){this.isJpPressed=!1,this.istext=!this.istext},pressFsButton(){this.text&&(this.isFsPressed=!0)},releaseFsButton(){if(this.text){this.isFsPressed=!1,this.handleTranslate();const t=parseInt(this.id),s=this.infoLists.findIndex((s=>s._id===t));-1!==s&&this.infoLists.splice(s,1)}},handleTranslate(){const t=this.$data.text,s={id:1,data:t};this.$data.text="",this.istext=!1,this.scrollToBottom(),this.infoList.push(s),f.A.post("https://aip.baidubce.com/rpc/2.0/mt/texttrans/v1?access_token=24.8f9127728ff2e7ac7ff43a33eb40db88.2592000.1720589798.282335-80733545",{q:t,from:"zh",to:"en"},{headers:{"Content-Type":"application/json;charset=utf-8"}}).then((t=>{const s={id:2,data:t.data.result.trans_result[0].dst};console.log(t),this.infoList.push(s),this.scrollToBottom()})).catch((t=>{console.error(t)}))}},beforeDestroy(){this.infoList.length!==this.infoNum&&this.saveInfoToCache()}},m=g,v=(0,l.A)(m,h,p,!1,null,"67cb7d08",null),x=v.exports,_=function(){var t=this,s=t._self._c;return s("div",{staticClass:"All"},[s("div",{staticClass:"greetings"},[t._v(t._s(t.greeting))]),s("div",{staticClass:"ContentBox"},[s("div",{staticClass:"tabs"},[s("div",{class:{active:1===t.currentSlide},on:{click:function(s){return t.slideTo(1)}}},[t._v("访谈室")]),s("div",{class:{active:2===t.currentSlide},on:{click:function(s){return t.slideTo(2)}}},[t._v("编辑部")]),s("div",{class:{active:3===t.currentSlide},on:{click:function(s){return t.slideTo(3)}}},[t._v("藏卷馆")])]),s("div",{ref:"swiperContainer",staticClass:"swiper-container"},[s("div",{staticClass:"swiper-wrapper"},[s("div",{staticClass:"swiper-slide"},t._l(t.TalkBoxBgi,(function(e,i){return s("div",{key:i,staticClass:"talkBoxItem",class:[(i+1)%4===1||(i+1)%4===0?"talkBoxItemLeft":"talkBoxItemRight",i===t.activeIndex&&t.isPressed?"small":""],style:{backgroundImage:`url(${e.bgi})`,margin:i>2?"3vw 0 0 3.33%":"0 0 0 3.33%"},attrs:{onselectstart:"return false;"},on:{touchmove:t.handleMove,touchstart:function(s){return t.pressButton(i)},touchend:function(s){return t.releaseButton(e.text)}}},[s("div",{staticClass:"talkBoxItem_Text"},[t._v(t._s(e.text))])])})),0),s("div",{staticClass:"swiper-slide"},t._l(t.infoLists,(function(e,i){return s("div",{key:i,staticClass:"infoItemBox",on:{click:function(s){return t.goInfoPage(e)}}},[s("div",{staticClass:"infoItemBox_Title"},[t._v("童年印象")]),s("div",{staticClass:"infoItemBox_TimeBox"},[s("div",[t._v(t._s(t.truncatedTime(e.time,0,11)))]),s("div",[t._v(t._s(t.truncatedTime(e.time,12,17)))])]),s("div",{staticClass:"infoItemBox_Data"},[t._v(t._s(e.infoListItem[0].data))]),s("div",{staticClass:"iconfont icon-tiaozhuan infoItemBox_Icon"})])})),0),s("div",{staticClass:"swiper-slide"},[t._v("Slide 3")])])])]),t._m(0)])},y=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"AddBox"},[s("i",{staticClass:"iconfont icon-tianjia"})])}],C=e(4654),B={name:"IndexPage",data(){return{greeting:"刘奶奶,早上好!",mySwiper:null,currentSlide:1,activeIndex:null,isPressed:!1,isMove:!0,infoLists:[],TalkBoxBgi:[{text:"童年印象",bgi:"https://img.zcool.cn/community/0125e15e4fe442a8012165182e7572.jpg@1280w_1l_2o_100sh.jpg"},{text:"儿时玩伴",bgi:"https://img.zcool.cn/community/01c79f5d9f3084a801211d533875a0.jpg@3000w_1l_2o_100sh.jpg"},{text:"家庭记忆",bgi:"https://img.zcool.cn/community/01830862b98eb90002c313f7c9d4a3.jpg?x-oss-process=image/auto-orient,1/resize,m_lfit,w_1280,limit_1/sharpen,100"},{text:"童年印象",bgi:"https://img.zcool.cn/community/0125e15e4fe442a8012165182e7572.jpg@1280w_1l_2o_100sh.jpg"},{text:"儿时玩伴",bgi:"https://img.zcool.cn/community/01c79f5d9f3084a801211d533875a0.jpg@3000w_1l_2o_100sh.jpg"},{text:"家庭记忆",bgi:"https://img.zcool.cn/community/01830862b98eb90002c313f7c9d4a3.jpg?x-oss-process=image/auto-orient,1/resize,m_lfit,w_1280,limit_1/sharpen,100"},{text:"家庭记忆",bgi:"https://img.zcool.cn/community/01da0a5e6db913a801216518b5ee6b.jpg@2o.jpg"}]}},computed:{},mounted(){var t=this;this.mySwiper=new C.A(this.$refs.swiperContainer,{loop:!1,on:{slideChange:function(){t.$data.currentSlide=this.realIndex+1}}}),this.getCachedData()},methods:{goInfoPage(t){console.log(t),this.$router.push({path:"/datapage",query:{data:t}})},truncatedTime(t,s,e){return t.substring(s,e)},getCachedData(){const t=localStorage.getItem("infoLists");t?(this.infoLists=JSON.parse(t),console.log(this.infoLists)):console.log("没有找到缓存数据")},slideTo(t){t<1?t=1:t>3&&(t=3),this.mySwiper.slideToLoop(t-1),this.currentSlide=t},pressButton(t){this.isMove=!0,this.activeIndex=t,this.isPressed=!0},releaseButton(t){this.isPressed=!1,console.log("滑动："+t),this.isMove&&this.$router.push("/home")},handleMove(){this.isMove=!1}}},b=B,I=(0,l.A)(b,_,y,!1,null,"f8213a14",null),S=I.exports,P=function(){var t=this,s=t._self._c;return s("div",{staticClass:"All"},[s("div",{staticClass:"TimeBox"},[s("div",{staticClass:"Time"},[s("div",[t._v(t._s(t.truncatedTime(t.timeData,0,11)))]),s("div",[t._v(t._s(t.truncatedTime(t.timeData,12,17)))])]),s("div",{staticClass:"Title"},[t._v("童年印象")])]),s("div",{ref:"scrollArea",staticClass:"MiddleBox"},t._l(t.dataList.infoListItem,(function(e,i){return s("div",{key:i,staticClass:"DataBox",staticStyle:{"overflow-y":"scroll"}},[s("div",{staticClass:"DataItemBox",class:{"align-right":1===e.id,"align-left":2===e.id}},[s("div",{class:{DataItem1:1===e.id,DataItem2:2===e.id}},[t._v(t._s(e.data))])])])})),0),s("div",{staticClass:"bottomBox"},[s("div",{staticClass:"bottomBox_Item continuouTalk",class:{small:t.isPressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(s){return s.stopPropagation(),t.pressButton.apply(null,arguments)},touchend:function(s){return s.stopPropagation(),t.releaseButton.apply(null,arguments)}}},[t._v(" 接着聊 "),s("i",{staticClass:"iconfont icon-chat",staticStyle:{color:"#7B8F43"}})]),s("div",{staticClass:"bottomBox_Item continuouStory",class:{small:t.isStoryPressed},attrs:{ontouchstart:"return false;",onselectstart:"return false;"},on:{touchstart:function(s){return s.stopPropagation(),t.pressStoryButton.apply(null,arguments)},touchend:function(s){return s.stopPropagation(),t.releaseStoryButton.apply(null,arguments)}}},[t._v(" 生成故事 "),s("i",{staticClass:"iconfont icon-jiantou",staticStyle:{color:"#1C4511"}})])])])},w=[],T={name:"DataPage",data(){return{isPressed:!1,isStoryPressed:!1,dataList:{},timeData:""}},mounted(){this.dataList=this.$route.query.data,console.log(this.dataList),this.$data.timeData=this.$route.query.data.time},methods:{pressButton(){this.isPressed=!0},releaseButton(){this.isPressed=!1,this.$router.push({path:"/home",query:{id:this.dataList._id}}),console.log(this.dataList._id)},releaseStoryButton(){this.isStoryPressed=!1},pressStoryButton(){this.isStoryPressed=!0},truncatedTime(t,s,e){return t.substring(s,e)}}},L=T,k=(0,l.A)(L,P,w,!1,null,"2da013c6",null),j=k.exports;i.Ay.use(d.Ay);const D=[{path:"/home",name:"home",component:x,meta:{title:"文本翻译"}},{path:"/",name:"indexpage",component:S,meta:{title:"时光之语"}},{path:"/datapage",name:"datapage",component:j,meta:{title:"时光之语"}}],$=new d.Ay({routes:D});var A=$,O=e(5353);i.Ay.use(O.Ay);var M=new O.Ay.Store({state:{},getters:{},mutations:{},actions:{},modules:{}});i.Ay.config.productionTip=!1,new i.Ay({router:A,store:M,render:t=>t(u)}).$mount("#app")}},s={};function e(i){var o=s[i];if(void 0!==o)return o.exports;var n=s[i]={exports:{}};return t[i].call(n.exports,n,n.exports,e),n.exports}e.m=t,function(){var t=[];e.O=function(s,i,o,n){if(!i){var a=1/0;for(u=0;u<t.length;u++){i=t[u][0],o=t[u][1],n=t[u][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||a>=n)&&Object.keys(e.O).every((function(t){return e.O[t](i[l])}))?i.splice(l--,1):(r=!1,n<a&&(a=n));if(r){t.splice(u--,1);var c=o();void 0!==c&&(s=c)}}return s}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[i,o,n]}}(),function(){e.d=function(t,s){for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};e.O.j=function(s){return 0===t[s]};var s=function(s,i){var o,n,a=i[0],r=i[1],l=i[2],c=0;if(a.some((function(s){return 0!==t[s]}))){for(o in r)e.o(r,o)&&(e.m[o]=r[o]);if(l)var u=l(e)}for(s&&s(i);c<a.length;c++)n=a[c],e.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return e.O(u)},i=self["webpackChunkaichat"]=self["webpackChunkaichat"]||[];i.forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i))}();var i=e.O(void 0,[504],(function(){return e(9175)}));i=e.O(i)})();
//# sourceMappingURL=app.7ed1eb5d.js.map